obj textbox
{
    event create
    {
        self.string=""
        self.strIndex=0
    }
    event draw
    {
        draw_set_color(c_black)
        draw_rectangle(room_current.room_height,1,(room_current.room_height/3)*2,room_current.room_width,true)
        draw_set_color(c_white)
        draw_text((room_current.room_height/3)*2+1,2,self.string[0:round(self.strIndex)])
        if self.strIndex<len(self.string)
        {
            self.strIndex+=0.2
        }
    }
}
obj player
{
    event create
    {
        self.y=0
        self.x=0
        self.mask_index=[[1]]
    }
    event step
    {
        if keyboard_check_pressed(97) //test
        {
            self.x-=1
        }
        else if keyboard_check_pressed(100)
        {
            self.x+=1
        }
        else if keyboard_check_pressed(119)
        {
            self.y-=1
        }
        else if keyboard_check_pressed(115)
        {
            self.y+=1
        }

    }
    event draw
    {
        draw_point(self.y,self.x)
        if place_empty(self,self.y+1,self.x)=0
        {
            room_current.textboxInst.string="Hey, how are you doing?"
        }

    }
}

obj mobTest
{
    event create
    {
        self.y=0
        self.x=0
        self.mask_index=[[1]]
    }
    event step
    {

        if irandom(0,100)=0
        {
            self.x-=1
        }
        if irandom(0,100)=0
        {
            self.x+=1
        }
        if irandom(0,100)=0 AND self.y>0
        {
            self.y-=1
        }
        if irandom(0,100)=0 AND self.y<room_current.room_height
        {
            self.y+=1
        }

    }
    event draw
    {
        draw_point(self.y,self.x)
    }
}

obj ctrl
{
  event draw
  {
    draw_text(3,4,"Topdown Game Demo")
  }
}
room rm1 {
    self.room_speed=60
    self.room_width=88
    self.room_height=24
    instance_create(10,10,player)
    instance_create(3,4,ctrl)
    instance_create(3,3,mobTest)
    self.textboxInst=instance_create(2,2,textbox)
}
room_goto(rm1)
